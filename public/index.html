<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>店務管理系統</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cwtex+Fangsong&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main id="app-content" class="page"></main>

    <div id="page-templates" style="display: none;">

        
    <div id="page-product-details">
        <button class="details-back-button">← 返回</button>
        <h1 class="details-title page-main-title"></h1>
        <div class="details-section">
            <div class="details-gallery">
                <img src="https://placehold.co/600x400/112240/ccd6f6?text=Image" class="details-image-main">
                <div class="details-image-thumbnails"></div>
            </div>
            <h3>費用</h3>
            <div id="product-price-content"></div>
            <hr>
            <h3>介紹</h3>
            <p id="product-intro-content"></p>
            <div id="product-specs-container"></div>
        </div>
    </div>        

    <div id="page-news-details">
        <button class="details-back-button">← 返回</button>
        <h1 id="news-details-title" class="page-main-title"></h1>
        <div class="details-section">
            <div class="news-card-header">
                <span id="news-details-category"></span>
                <span id="news-details-date"></span>
            </div>
            <img id="news-details-image" src="" alt="" style="width: 100%; display: none;">
            <div id="news-details-content" style="white-space: pre-wrap;"></div>
        </div>
    </div>

    <div id="page-home">
        <div class="news-header">
            <div class="news-header-decoration"></div>
            <h1 class="page-main-title">最新情報</h1>
        </div>
        <div id="news-filter-container"><p>讀取中...</p></div>
        <div id="news-list-container"><p>正在載入最新情報...</p></div>
    </div>

    <div id="page-products">
        <h1 class="page-main-title">產品型錄</h1>
        <div id="filter-controls">
            <input type="search" id="keyword-search" placeholder="搜尋關鍵字...">
            <div id="tag-filter-container">
                <div id="primary-tags" class="filter-group"></div>
                <div id="secondary-tags" class="filter-group" style="display: none;"></div>
            </div>
            <button id="more-tags-btn">更多標籤</button>
            <button id="clear-filters">清除所有篩選</button>
        </div>
        <div id="product-list-container"><p>正在載入資料...</p></div>
    </div>

    <div id="page-my-exp-history">
        <h1 class="page-main-title">我的消費紀錄</h1>
        <div id="my-exp-history-container"><p>查詢中...</p></div>
        <button class="details-back-button" style="margin-top: 20px;">返回會員中心</button>
    </div>

    
    <div id="page-my-bookings">
        <h1 class="page-main-title"></h1>
        <div class="filter-group" style="margin-bottom: 20px;">
            <button id="toggle-past-bookings-btn" class="cta-button" style="width: auto; padding: 10px 20px;">查看過往紀錄</button>
        </div>
        <h2>進行中的預約</h2>
        <div id="my-bookings-container"><p>查詢中...</p></div>
        <div id="past-bookings-container" style="display: none;">
            <h2 style="margin-top: 30px;">過往的預約</h2>
        </div>
        <button class="details-back-button" style="margin-top: 20px;">返回會員中心</button>
    </div>    


<div id="page-profile">
    <h1 class="page-main-title">會員中心</h1>
    <div id="qrcode-container">
        <div id="qrcode"></div>
    </div>
    <div class="profile-details-grid">
        <div class="profile-avatar">
            <img id="profile-picture" src="https://placehold.co/80x80/112240/ccd6f6?text=頭像" alt="Profile Picture">
        </div>
        <div class="profile-stats">
            <h2 id="display-name">讀取中...</h2>
            <p><strong></strong><span id="user-class"></span></p>
            <p><strong></strong><span id="user-level"></span></p>
            <p><strong></strong><span id="user-exp"></span></p>
        </div>
    </div>
    <div id="user-perk-line" class="perk-display" style="display: none;"></div>
    
    <div class="profile-actions">
        <button class="cta-button" id="my-bookings-btn">預約紀錄</button>
        <button class="cta-button" id="my-exp-history-btn">消費紀錄</button>
        <button class="cta-button" id="edit-profile-btn">編輯個人資料</button>
        <a href="/admin-panel.html?demo=true" target="_blank" class="cta-button" style="text-align: center; text-decoration: none; grid-column: 1 / -1; background-color: #4A90E2; margin-top: 5px;">
            一鍵體驗後台 (DEMO)
        </a>
    </div>
</div>


<div id="page-edit-profile">
    <h1 class="page-main-title">編輯個人資料</h1>
    <div class="details-section">
        <form id="edit-profile-form">
            <div class="form-group">
                <label for="edit-profile-name">LINE 名稱 (不可修改)</label>
                <input type="text" id="edit-profile-name" readonly style="background-color: #333; color: #888;">
            </div>
            <div class="form-group">
                <label for="edit-profile-nickname">您的暱稱</label>
                <input type="text" id="edit-profile-nickname" required>
            </div>
            <div class="form-group">
                <label for="edit-profile-real-name">真實姓名 (選填)</label>
                <input type="text" id="edit-profile-real-name">
            </div>
            <div class="form-group">
                <label for="edit-profile-phone">聯絡電話</label>
                <input type="tel" id="edit-profile-phone" required>
            </div>
            <div class="form-group">
                <label for="edit-profile-email">電子信箱 (選填)</label>
                <input type="email" id="edit-profile-email">
            </div>
            <div class="form-group">
                <label>偏好的類型 (選填)</label>
                <div id="preferred-product-container" class="tag-selection-container"></div>
                <div id="preferred-product-other-container" style="display: none; margin-top: 10px;">
                    <input type="text" id="preferred-product-other-input" placeholder="請輸入其他類型，以逗號分隔">
                </div>
            </div>
            <p id="edit-profile-form-status" style="text-align: center; min-height: 1.2em;"></p>
            <button type="submit" class="cta-button">儲存變更</button>
        </form>
    </div>
    <button class="details-back-button" style="margin-top: 20px;">返回會員中心</button>
</div>

    <div id="page-checkout">
        <h1 class="page-main-title">購物車與結帳</h1>
        <div class="details-section">
            <p>這裡是購物車與結帳功能的展示頁面。</p>
            <p>測試用的</p>
            <p>這是一個為未來金流功能預留的介面，之後有空再建置。</p>
        </div>
    </div>
<div id="page-booking">
    <h1 class="page-main-title">線上預約</h1>

    <div class="details-section" style="margin-bottom: 20px; background-color: rgba(88, 166, 255, 0.1);">
        <p style="margin: 0; text-align: center; color: var(--color-text-secondary);">
            可供店家選擇是否可連續選擇多日、時段，並供店家關閉預約時段。
        </p>
    </div>

    <div class="details-section">
        <div id="booking-datepicker-container"></div>
        <div id="booking-time-slot-container" style="margin-top: 20px; display: none;">
            <label for="time-slot-select" style="display: block; margin-bottom: 10px;">請選擇時段：</label>
            <select id="time-slot-select"></select>
        </div>
    </div>

    <div id="booking-details-form">
        <h3>請填寫預約資訊</h3>
        <div class="form-group">
            <label for="booking-item">預約項目</label>
            <input type="text" id="booking-item" placeholder="請輸入預約的服務或項目">
        </div>
        <div class="form-group">
            <label for="booking-people">人數</label>
            <input type="number" id="booking-people" value="1" min="1">
        </div>
        <div class="form-group">
            <label for="contact-name">預約姓名</label>
            <input type="text" id="contact-name" placeholder="請輸入您的姓名">
        </div>
        <div class="form-group">
            <label for="contact-phone">聯絡電話</label>
            <input type="tel" id="contact-phone" placeholder="請輸入您的電話">
        </div>
        <button id="confirm-booking-btn" class="cta-button">確認預約</button>
    </div>

    <button id="view-my-bookings-btn" class="cta-button" style="margin-top: 20px; background-color: var(--color-secondary);">查看我的預約</button>
</div>

        <div id="page-info">
            <h1 class="page-main-title">店家資訊</h1>
            <div id="store-info-container" class="details-section">
                <div class="info-section">
                    <h2>地址</h2>
                    <p id="store-address">讀取中...</p>
                </div>
                <div class="info-section">
                    <h2>電話</h2>
                    <p id="store-phone">讀取中...</p>
                </div>
                <div class="info-section">
                    <h2>營業時間</h2>
                    <p id="store-hours" style="white-space: pre-wrap;">讀取中...</p>
                </div>
                 <div class="info-section">
                    <h2>店家介紹</h2>
                    <p id="store-description">讀取中...</p>
                </div>
            </div>
        </div>
        
    </div>

<nav id="tab-bar">
    <button class="tab-button active" data-target="page-home">最新<br>情報</button>
    <button class="tab-button" data-target="page-products">產品<br>型錄</button>
    <button class="tab-button" data-target="page-checkout">購物<br>結帳</button>
    <button class="tab-button" data-target="page-profile">會員<br>中心</button>
    <button class="tab-button" data-target="page-booking">線上<br>預約</button>
    <button class="tab-button" data-target="page-info">店家<br>資訊</button>
</nav>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/zh-tw.js"></script>

    <script src="/script.js"></script>
</body>
</html>